{% extends 'base2.html' %}
{% load static %}

{% block title %} Sign Up {% endblock title%}

{% block content %}
    <!-- Content -->
    <div class="page-box">
        <div class="app-container page-sign-up">
            <div class="content-box">
                <div class="content-header">
                    <div class="app-logo">
                        <a href="{% url 'index' %}">
                            <div class="logo-wrap">
                                <svg width="50" height="44" version="1.1" viewBox="0 0 700 700" xmlns="http://www.w3.org/2000/svg" class="fill-svg">
                                    <path d="m359.43 43.234v24.375h24.375v18.859h-24.375v24.375h-18.859v-24.375h-24.375v-18.859h24.375v-24.375zm67.027 24.375h92.559c5.2227 0 9.5742 4.3516 9.5742 9.5742v103.3h125.93c5.2227 0 9.2852 4.0625 9.2852 9.2852v360.95c0 4.9336-4.0625 9.2852-9.2852 9.2852h-609.04c-4.9336 0-9.2852-4.3516-9.2852-9.2852v-360.95c0-5.2227 4.3516-9.2852 9.2852-9.2852h125.93v-103.3c0-5.2227 4.3516-9.5742 9.5742-9.5742h92.559c2.0312-17.41 10.156-33.078 22.051-44.973 13.926-13.926 33.078-22.633 54.551-22.633 39.172 0 71.668 29.598 76.312 67.605zm-152.91 18.859h-83.273v454.67h105.33v-103.3c0-5.2227 4.0625-9.2852 9.2852-9.2852h90.238c5.2227 0 9.2852 4.0625 9.2852 9.2852v103.3h105.33v-454.67h-83.273c-4.6406 38.012-37.141 67.605-76.312 67.605-39.461 0-71.957-29.598-76.602-67.605zm76.602-67.605c-16.25 0-30.758 6.3828-41.203 17.121-10.734 10.445-17.121 24.953-17.121 41.203 0 32.207 25.824 58.031 58.32 58.031 32.207 0 58.031-25.824 58.031-58.031 0-32.496-25.824-58.32-58.031-58.32zm214.13 319.46h44.973c5.2227 0 9.5742 4.0625 9.5742 9.2852v45.266c0 4.9336-4.3516 9.2852-9.5742 9.2852h-44.973c-5.2227 0-9.5742-4.3516-9.5742-9.2852v-45.266c0-5.2227 4.3516-9.2852 9.5742-9.2852zm35.688 18.57h-26.402v26.402h26.402zm-35.688-108.81h44.973c5.2227 0 9.5742 4.0625 9.5742 9.2852v45.266c0 5.2227-4.3516 9.2852-9.5742 9.2852h-44.973c-5.2227 0-9.5742-4.0625-9.5742-9.2852v-45.266c0-5.2227 4.3516-9.2852 9.5742-9.2852zm35.688 18.859h-26.402v26.113h26.402zm-71.379-67.895v342.09h116.35v-342.09zm-437.84 139.27h44.973c5.2227 0 9.5742 4.0625 9.5742 9.2852v45.266c0 4.9336-4.3516 9.2852-9.5742 9.2852h-44.973c-5.2227 0-9.5742-4.3516-9.5742-9.2852v-45.266c0-5.2227 4.3516-9.2852 9.5742-9.2852zm35.688 18.57h-26.402v26.402h26.402zm-35.688-108.81h44.973c5.2227 0 9.5742 4.0625 9.5742 9.2852v45.266c0 5.2227-4.3516 9.2852-9.5742 9.2852h-44.973c-5.2227 0-9.5742-4.0625-9.5742-9.2852v-45.266c0-5.2227 4.3516-9.2852 9.5742-9.2852zm35.688 18.859h-26.402v26.113h26.402zm44.973-67.895h-116.35v342.09h116.35zm65.867 3.7734h44.973c5.2227 0 9.5742 4.3516 9.5742 9.5742v44.973c0 5.2227-4.3516 9.5742-9.5742 9.5742h-44.973c-5.2227 0-9.2852-4.3516-9.2852-9.5742v-44.973c0-5.2227 4.0625-9.5742 9.2852-9.5742zm35.688 18.859h-26.402v26.402h26.402zm54.551-18.859h44.973c5.2227 0 9.5742 4.3516 9.5742 9.5742v44.973c0 5.2227-4.3516 9.5742-9.5742 9.5742h-44.973c-5.2227 0-9.5742-4.3516-9.5742-9.5742v-44.973c0-5.2227 4.3516-9.5742 9.5742-9.5742zm35.688 18.859h-26.402v26.402h26.402zm54.551-18.859h44.973c5.2227 0 9.2852 4.3516 9.2852 9.5742v44.973c0 5.2227-4.0625 9.5742-9.2852 9.5742h-44.973c-5.2227 0-9.5742-4.3516-9.5742-9.5742v-44.973c0-5.2227 4.3516-9.5742 9.5742-9.5742zm35.688 18.859h-26.402v26.402h26.402zm-216.16 71.379h44.973c5.2227 0 9.5742 4.3516 9.5742 9.5742v44.973c0 5.2227-4.3516 9.2852-9.5742 9.2852h-44.973c-5.2227 0-9.2852-4.0625-9.2852-9.2852v-44.973c0-5.2227 4.0625-9.5742 9.2852-9.5742zm35.688 18.859h-26.402v26.402h26.402zm54.551-18.859h44.973c5.2227 0 9.5742 4.3516 9.5742 9.5742v44.973c0 5.2227-4.3516 9.2852-9.5742 9.2852h-44.973c-5.2227 0-9.5742-4.0625-9.5742-9.2852v-44.973c0-5.2227 4.3516-9.5742 9.5742-9.5742zm35.688 18.859h-26.402v26.402h26.402zm54.551-18.859h44.973c5.2227 0 9.2852 4.3516 9.2852 9.5742v44.973c0 5.2227-4.0625 9.2852-9.2852 9.2852h-44.973c-5.2227 0-9.5742-4.0625-9.5742-9.2852v-44.973c0-5.2227 4.3516-9.5742 9.5742-9.5742zm35.688 18.859h-26.402v26.402h26.402zm-139.27 229.22h71.668v-94.012h-71.668z" />
                                </svg>
                                <!-- end SVG logo -->
                                <div class="text m-1 text-blue"><span>Smart Hospital</span></div>
                            </div>
                        </a>
                    </div>
                </div>

                <div class="content-body">
                    <div class="w-100">
                        <h2 class="h5 mt-0 mb-1">Sign up</h2>
                        <p class="text-muted">Create your account</p>

                        
                        <!-- alerts -->
                        {% include 'partials/_alerts.html' %}

                        <!-- form -->
                        {% if user_add == True %}
                            <form method="POST" style="display: none;">
                        {% else %}
                            <form method="POST">
                        {% endif %}
                            {% csrf_token %}
                            <div class="form-group">
                                <input autofocus name="username" value="{{username}}" class="form-control" type="text" placeholder="Username">
                            </div>
                            <!-- selecting a user type -->
                            <div class="form-group">
                                <div class="dropdown bootstrap-select">
                                        <select onchange="onChangeOf(value);" name="user_type" placeholder="Select A User Type" class="selectpicker" tabindex="null" aria-label="Default select example ">                            
                                            <option value="workstation_nurse">Workstation Nurse</option>
                                            <option value="patient">Patient </option>
                                            <option value="medication_nurse">Medication Nurse</option>
                                            <option value="manager" >Manager</option>
                                            <option value="doctor" >Doctor</option>
                                        </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <input name="email" value="{{email}}" class="form-control" type="email" placeholder="Email address">
                            </div>

                            <div class="form-group">
                                <input name="password" id="pass1" value="{{password}}" class="form-control" type="password" placeholder="Password">
                            </div>

                            <div class="form-group">
                                <input name="confirm_password" id="pass2" value="{{confirm_password}}" class="form-control" type="password" placeholder="Confirm Password">
                            </div>

                            <div id="patient_info" style="display: none;" >
                                <!-- device id -->
                                <div class="form-group" >
                                    <select name="device_id" placeholder="Select A Device ID" class="selectpicker" tabindex="null" aria-label="Default select example ">                                        
                                        
                                        {% for id in device_ids %}
                                            <option value="{{id}}">{{id}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <!-- selection a medication nurse-->
                                <div class="form-group" >
                                    <select name="w_nurse" placeholder="Select A Workstation Nurse" class="selectpicker" tabindex="null" aria-label="Default select example ">                                        
                                        
                                        {% for w_n in work_nurses %}
                                            <option value="{{w_n.full_name}}">{{w_n.full_name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <!-- selection a medication nurse-->
                                <div class="form-group" >
                                    <div class="form-group" >
                                        <select name="m_nurse" placeholder="Select A Medication Nurse" class="selectpicker" tabindex="null" aria-label="Default select example ">                                      
                                            
                                            {% for m_n in med_nurses %}
                                                <option value="{{m_n.full_name}}">{{m_n.full_name}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                                
                            <!-- submit -->
                            <div class="actions justify-content-between">
                                <button onclick="matchPassword();" class="btn btn-primary" type="submit" name="btnsignup">
                                    <span class="btn-icon icofont-plus me-2"></span>
                                    Sign up
                                </button>
                            </div>
                        </form>
                        <!-- end form -->
                        <p class="mt-2">Have an account? <a href="{% url 'signin' %}">Log in!</a></p>
                    </div>
                </div>
            </div>   
        </div>
    </div>
    <!-- end Content -->
    {% block javascript %}
        <script>
            function onChangeOf(i){
                if (i == 'patient'){
                    document.getElementById('patient_info').style.display = 'block';
                } else {
                    document.getElementById('patient_info').style.display = 'none';
                }  
            }

            function matchPassword(){
                var pw1 = document.getElementById('pass1');
                var pw2 = document.getElementById('pass2');
                if (pw1 != pw2) {
                    document.getElementById('notMatch').style.display = 'block';
                }
            }
        </script>
    {% endblock javascript %}
{% endblock content %}

